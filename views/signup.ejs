<%- include('includes/head.ejs') %>

<main>
    <section class="mb-5">
        <div class="container py-5">
          <div class="row d-flex align-items-center justify-content-center h-100">
            <div class="col-md-8 col-lg-7 col-xl-6">
              <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg"
                class="img-fluid" alt="Phone image">
            </div>
            <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">

              <%- include('includes/errormsg.ejs') %>

              <%
                let firstnameError = ''
                let firstnameClass = ''
                let lastnameError = ''
                let lastnameClass = ''
                let ageError = ''
                let ageClass = ''
                let qualificationError = ''
                let qualificationClass = ''
                let emailError = ''
                let emailClass = ''
                let phoneError = ''
                let phoneClass = ''
                let passwordError = ''
                let passwordClass = ''
                let cpasswordError = ''
                let cpasswordClass = ''
              %>

              <% for(let err of formErrors) {  %>

                <%
                  if(err.path == 'firstname'){
                    firstnameClass = 'is-invalid'
                    firstnameError = err.msg;
                  }
                  if(err.path == 'lastname'){
                    lastnameClass = 'is-invalid'
                    lastnameError = err.msg;
                  }
                  if(err.path == 'age'){
                    ageClass = 'is-invalid'
                    ageError = err.msg;
                  }
                  if(err.path == 'qualification'){
                    qualificationClass = 'is-invalid'
                    qualificationError = err.msg;
                  }
                  if(err.path == 'email'){
                    emailClass = 'is-invalid'
                    emailError = err.msg;
                  }
                  if(err.path == 'phone'){
                    phoneClass = 'is-invalid'
                    phoneError = err.msg;
                  }
                  if(err.path == 'password'){
                    passwordClass = 'is-invalid'
                    passwordError = err.msg;
                  }
                  if(err.path == 'cpassword'){
                    cpasswordClass = 'is-invalid'
                    cpasswordError = err.msg;
                  }
                  
                %>
              
              <% } %>
              
              <form method="post" action="/register">
                <!-- First Name -->
                <div class="form-outline mb-4">
                  <label class="form-label" for="firstname">First Name</label>  
                  <input type="text" id="firstname" value="<%= formdata.firstname %>" name="firstname" class="form-control form-control-lg <%= firstnameClass %>" />
                  <p class="invalid-feedback"><%= firstnameError %></p>
                </div>

                <!-- Last Name -->
                <div class="form-outline mb-4">
                    <label class="form-label" for="lastname">Last Name</label>
                    <input type="text" id="lastname" value="<%= formdata.lastname %>" name="lastname" class="form-control form-control-lg <%= lastnameClass %>" />
                    <p class="invalid-feedback"><%= lastnameError %></p>
                </div>

                <!-- Age -->
                <div class="form-outline mb-4">
                    <label class="form-label" for="age">Age</label>
                    <input type="number" id="age" value="<%= formdata.age %>" name="age" min="5" max="120" class="form-control form-control-lg <%= ageClass %>" />
                    <p class="invalid-feedback"><%= ageError %></p>
                </div>

                <!-- Qualification -->
                <div class="form-outline mb-4">
                    <label class="form-label" for="qualification">Qualification</label>
                    <input type="text" id="qualification" value="<%= formdata.qualification %>" name="qualification" class="form-control form-control-lg <%= qualificationClass %>" />
                    <p class="invalid-feedback"><%= qualificationError %></p>
                </div>
      
                <!-- Email -->
                <div class="form-outline mb-4">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" id="email" value="<%= formdata.email %>" name="email" class="form-control form-control-lg <%= emailClass %>" />
                    <p class="invalid-feedback"><%= emailError %></p>
                </div>

                <!-- Phone -->
                <div class="form-outline mb-4">
                    <label class="form-label" for="phone">Phone</label>
                    <input type="text" id="phone" value="<%= formdata.phone %>" name="phone" class="form-control form-control-lg <%= phoneClass %>" />
                    <p class="invalid-feedback"><%= phoneError %></p>
                </div>

                <!-- Password -->
                <div class="form-outline mb-4">
                  <label class="form-label" for="password">Password</label>
                  <input type="password" id="password" value="<%= formdata.password %>" name="password" class="form-control form-control-lg <%= passwordClass %>" />
                  <p class="invalid-feedback"><%= passwordError %></p>
                </div>

                <!-- Confirm Password -->
                <div class="form-outline mb-4">
                  <label class="form-label" for="cpassword">Confirm Password</label>
                  <input type="password" id="cpassword" value="<%= formdata.cpassword %>" name="cpassword" class="form-control form-control-lg <%= cpasswordClass %>" />
                  <p class="invalid-feedback"><%= cpasswordError %></p>
                </div>

                <!-- Submit button -->
                <button type="submit" class="btn btn-primary btn-lg btn-block">Sign up</button>
      
              </form>
            </div>
          </div>
        </div>
      </section>
</main>

<%- include('includes/footer.ejs') %>